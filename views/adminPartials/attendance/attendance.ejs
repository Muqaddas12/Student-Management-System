
<form method="post" action="/api/admin/markAttendance" class="container">
 <div class="attendance-container">
    <fieldset>
        <legend>Mark Attendance</legend>

        <label for="programme">Programme</label>
        <select id="programme" name="programme">
            <option value="">Select Programme</option>
            <option value="B.Sc. in Electronics">B.Sc. in Electronics</option>
            <option value="B.Tech. in Electrical Engineering">B.Tech. in Electrical Engineering</option>
            <option value="B.Tech. in Electronics & Communication Engineering">B.Tech. in Electronics & Communication Engineering</option>
            <option value="Bachelor of Arts (General)">Bachelor of Arts (General)</option>
            <option value="Bachelor of Arts and Bachelor of Law">Bachelor of Arts and Bachelor of Law</option>



            <option value="Master of Arts (Education)">Master of Arts (Education)</option>
            <option value="Master of Arts (English)">Master of Arts (English)</option>

            <option value="Master of Computer Applications">Master of Computer Applications</option>
         
        </select>

        <label for="semester">Semester</label>
        <select id="semester" name="semester">
            <option value="">Select Semester</option>
            <option value="1">1st</option>
            <option value="2">2nd</option>
            <option value="3">3rd</option>
            <option value="4">4th</option>
            <option value="5">5th</option>
            <option value="6">6th</option>
            <option value="7">7th</option>
            <option value="8">8th</option>
            <option value="9">9th</option>
            <option value="10">10th</option>
            
        </select>

        <label for="course">Course</label>
        <select id="course" name="course">
            <option value="">Select Course</option>
            <option value="CS101">Data Structures</option>
            <option value="CS102">Algorithms</option>
            <option value="CS103">Operating System</option>
            <option value="CS104">Database Management System</option>
            <option value="CS105">Computer Networks</option>
            <option value="CS106">Software Engineering</option>
            <option value="CS107">Artificial Intelligence</option>
            <option value="CS108">Machine Learning</option>
            <option value="CS109">Cyber Security</option>
            <option value="CS110">Cloud Computing</option>
            <option value="CS111">Big Data Analytics</option>
            <option value="CS112">Computer Graphics</option>
            <option value="CS113">Internet of Things</option>
            <option value="CS114">Blockchain Technology</option>
            <option value="CS115">Compiler Design</option>
            <option value="CS116">Theory of Computation</option>
    
            
        </select>

        <div class="students-container" id="students-list">
            
        </div>

        <button type="submit">Submit Attendance</button>
   </fieldset>
 </div>
 </form>



<style>
  
  .container {
         width: 100%;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            overflow: auto;
        }
.attendance-container{
    width: 70%;
    margin: auto;
}
        fieldset {
            border: none;
            padding: 0;
        }

        legend {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .students-container {
            margin-top: 15px;
            padding: 10px;
            background: #f1f1f1;
            border-radius: 5px;
        }

        .student {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: #fff;
            margin: 5px 0;
            border-radius: 5px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
        }

        .attendance-options {
            display: flex;
            gap: 10px;
        }

        button {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }
</style>


<script>
    document.addEventListener("DOMContentLoaded", function () {
    const programmeSelect = document.getElementById("programme");
    const semesterSelect = document.getElementById("semester");
    const courseSelect = document.getElementById("course");
    const studentsList = document.getElementById("students-list");

    function fetchStudents() {
        const programme = programmeSelect.value.trim();
        const semester = semesterSelect.value.trim();
        const course = courseSelect.value.trim();

        // Make request only if all three values are selected
        if (!programme || !semester || !course) {
        
            return;
        }

        fetch(`/api/admin/getStudents?programme=${programme}&semester=${semester}&course=${course}`)
            .then(response => response.json())
            .then(data => {
                console.log(data)
                studentsList.innerHTML = "";
                if (data.length === 0) {
                    studentsList.innerHTML = "<p>No students found.</p>";
                    return;
                }
                data.forEach((student, index) => {
                    studentsList.innerHTML = `
                       
                        <div class="student">
                            <span>${student.firstName}</span>
                            <span>${student.rollNumber}</span>
                            <label><input type="radio" name=${student.id} value="Present" required > ‚úÖPresent</label>
                            <label><input type="radio" name=${student.id} value="Absent"> ‚ùåAbsent</label>
                        </div>
                        <div class="student">
                            <span>${student.firstName}</span>
                            <span>${student.rollNumber}</span>
                            <label><input type="radio" name=${student.id+1} value="Present" required > ‚úÖPresent</label>
                            <label><input type="radio" name=${student.id+1  } value="Absent"> ‚ùåAbsent</label>
                        </div>
                    `;
                });
            })
            .catch(error => console.error("Error fetching students:", error));
    }

    // üî• Attach a single event listener to all dropdowns
    [programmeSelect, semesterSelect, courseSelect].forEach(select => {
        select.addEventListener("change", fetchStudents);
    });
});

</script>